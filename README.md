# Lyudochka

Десктопное Windows-приложение для автоматизации создания задач в Jira с помощью ИИ.

Пользователь выбирает команду, описывает задачу своими словами — приложение применяет правила этой команды и переформатирует текст через LLM в готовую задачу Jira. Если ИИ не хватает деталей, он задаёт уточняющие вопросы прямо в интерфейсе.

---

## Ключевые возможности

- **Генерация задач через ИИ** — описание в свободной форме превращается в структурированный текст по правилам конкретной команды
- **Поддержка двух LLM** — Anthropic Claude и Google Gemini, выбор провайдера в настройках
- **Уточняющие вопросы** — если данных недостаточно, ИИ задаёт вопросы и после ответов строит финальный текст
- **Черновики** — незавершённые задачи автоматически сохраняются; их можно продолжить в любое время из раздела «Сохранённые задачи»
- **Управление командами** — для каждой команды задаются правила написания задач, контекст и шаблон Definition of Done
- **Параметры Jira** — результат содержит готовые поля: проект, тип задачи, приоритет, метки
- **Копирование одной кнопкой** — весь текст задачи копируется в буфер обмена
- **Изолированное хранение данных** — API-ключи и настройки хранятся в `%APPDATA%\Lyudochka`, не затрагиваются при обновлении приложения

---

## Требования

- Windows 10 / 11
- Python 3.11+
- API-ключ [Anthropic](https://console.anthropic.com/) и/или [Google Gemini](https://aistudio.google.com/app/apikey)

---

## Установка

```bash
# 1. Клонировать репозиторий
git clone https://github.com/alexeysophia/Lyudochka.git
cd Lyudochka

# 2. Создать виртуальное окружение
python -m venv .venv
.venv\Scripts\activate

# 3. Установить зависимости
pip install -r requirements.txt

# 4. Запустить приложение
python main.py
```

Чтобы создать ярлык на рабочем столе (иконка + запуск без консоли):

```bash
python create_shortcut.py
```

---

## Использование

### 1. Настройки

При первом запуске перейдите в раздел **«Настройки»**:

- Выберите LLM-провайдер: **Anthropic (Claude)** или **Google Gemini**
- Введите соответствующий API-ключ
- Нажмите **«Сохранить»**

### 2. Добавление команды

Перейдите в раздел **«Команды»** и нажмите **«Добавить команду»**:

| Поле | Описание |
|---|---|
| Название команды | Произвольное имя, например `Backend Team` |
| Ключ проекта Jira | Ключ проекта в Jira, например `BACKEND` |
| Тип задачи | Story, Bug, Task, Epic или Sub-task |
| Правила команды | Требования к оформлению задач, принятые в команде |
| Контекст команды | Краткое описание продуктов и зон ответственности (передаётся ИИ как контекст) |
| Руководитель команды | Имя руководителя, передаётся ИИ как контекст |

### 3. Создание задачи

Перейдите в раздел **«Создать задачу»**:

1. Выберите команду из выпадающего списка
2. Опишите задачу в свободной форме в поле «Описание задачи»
3. Нажмите **«Сгенерировать»**

**Если ИИ попросит уточнения** — появится форма с вопросами. Заполните ответы и нажмите **«Отправить ответы»**.

**Результат** содержит:
- Название задачи
- Полное описание в формате Markdown
- Параметры Jira: проект, тип, приоритет, метки

Нажмите кнопку копирования в правом верхнем углу карточки, чтобы скопировать текст в буфер обмена.

### 4. Черновики

Незавершённые задачи (на стадии ввода, уточнения или с готовым результатом) автоматически сохраняются. В разделе **«Сохранённые задачи»** отображается список черновиков с указанием команды, даты и стадии. Нажмите **«Продолжить»**, чтобы восстановить задачу, или **«Удалить»** для её удаления.

---

## Структура проекта

```
main.py                        # точка входа
create_shortcut.py             # создание ярлыка на рабочем столе
requirements.txt
icons/                         # иконки приложения

data/
  models.py                    # датаклассы: Team, Settings, AIResponse, Draft
  settings_store.py            # чтение/запись %APPDATA%\Lyudochka\settings.json
  teams_store.py               # чтение/запись %APPDATA%\Lyudochka\teams\*.json
  drafts_store.py              # чтение/запись %APPDATA%\Lyudochka\drafts\*.json

core/
  ai_router.py                 # маршрутизация запросов к Anthropic или Gemini
  anthropic_client.py          # асинхронный клиент Anthropic API
  gemini_client.py             # асинхронный клиент Google Gemini API
  prompt_builder.py            # сборка промптов из правил команды
  response_parser.py           # парсинг структурированного JSON из ответа ИИ

ui/
  app.py                       # AppShell и навигация
  screens/
    main_screen.py             # экран создания задачи
    teams_screen.py            # список команд
    team_editor.py             # форма создания/редактирования команды
    settings_screen.py         # настройки API-ключей
    drafts_screen.py           # список сохранённых черновиков
  components/
    result_card.py             # карточка с готовой задачей
    questions_form.py          # форма уточняющих вопросов
```

---

## Хранилище данных

Все пользовательские данные хранятся в `%APPDATA%\Lyudochka`:

| Путь | Содержимое |
|---|---|
| `settings.json` | API-ключи и выбранный LLM-провайдер |
| `teams\{name}.json` | Настройки каждой команды |
| `drafts\{id}.json` | Сохранённые черновики задач |

---

## Зависимости

| Пакет | Назначение |
|---|---|
| `flet >= 0.80` | Desktop UI |
| `anthropic >= 0.40` | Anthropic Claude API |
| `google-genai >= 1.0` | Google Gemini API |
| `Pillow >= 10.0` | Конвертация иконок (PNG → ICO) |
